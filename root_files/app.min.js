"use strict";{const ignoreAppDataFields=["app-api","app-name","app-company-singular","app-company-possessive","app-domain","webui-version","app-projects"];runWhenWebUIReady((async()=>{webui._appSettings.isDesktopApp=!0;let data=await window.__TAURI__.core.invoke("get_app_data",{}).catch((msg=>webui.alert(msg)));webui.taskProxyData=data,Object.entries(data.data).forEach((([key,value])=>{-1===ignoreAppDataFields.indexOf(key)&&(console.log("Load data",key,value),"page-path"===key?setTimeout((()=>handlePagePath(value)),100):webui.setData(key,value))})),webui.watchAppDataChanges(queueAppDataChanges)}));let queueId="";const queueTimeout=2e3;function handlePagePath(pagePath){let navTo="/root"===pagePath?"/":pagePath;webui.navigateTo(navTo)}async function queueAppDataChanges(_,appData){let myId=webui.uuid(),oldId=queueId;queueId=myId,""===oldId?(await saveAppData(appData),setTimeout((()=>{""!==queueId&&queueId===myId&&(queueId="")}),queueTimeout)):setTimeout((async()=>{""!==queueId&&queueId!==myId||(await saveAppData(appData),""!==queueId&&queueId===myId&&(queueId=""))}),queueTimeout)}async function saveAppData(appData){appData&&(webui.taskProxyData.data=appData,await window.__TAURI__.core.invoke("save_app_data",{data:webui.taskProxyData}).catch((msg=>webui.alert(msg))))}function runWhenWebUIReady(action){try{webui.isEqual(1,1),action()}catch{setTimeout((()=>runWhenWebUIReady(action)),10)}}}