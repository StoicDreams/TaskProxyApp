"use strict";{function generateSecurityKey(){let segments=[];for(let index=0;index<50;++index)segments.push(generateSecurityKeySegment(20));return segments.join(" ")}function generateSecurityKeySegment(length){const charset="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*-_=+?~";let result="";const array=new Uint32Array(length);window.crypto.getRandomValues(array);for(let i=0;i<length;i++)result+=charset[array[i]%76];return result}webui.define("app-security-key-setter",{linkCss:!0,preload:"input-message alert alerts",constructor:t=>{t._alert=t.template.querySelector("webui-alert"),t._del=t.template.querySelector('webui-button[theme="danger"]'),t._sav=t.template.querySelector('webui-button[theme="primary"]'),t._gen=t.template.querySelector('webui-button[theme="secondary"]'),t._input=t.template.querySelector("webui-input-message")},linkCss:!0,connected:async function(t){function handleError(ex){t._alert.setValue({text:ex,theme:"danger"})}await webui.proxy.hasSecurityKey(handleError)?t._del.classList.remove("hidden"):t._del.classList.add("hidden"),t._del.addEventListener("click",webui.eventSoloProcess((async _=>{let result=await webui.proxy.deleteSecurityKey(handleError);result&&(t._alert.setValue({text:result,theme:"success"}),webui.setData("home-state","sec-key-deleted"))}),handleError)),t._sav.addEventListener("click",webui.eventSoloProcess((async _=>{let secKey=`${t._input.value}`.trim();if(secKey.length<100)return void t._alert.setValue({text:"Security key must be at least 100 characters in length.",theme:"danger"});t._alert.setValue({text:"Setting key, please wait",theme:"info"});let result=await webui.proxy.setSecurityKey(secKey,handleError);result&&(t._alert.setValue({text:result,theme:"success"}),webui.setData("home-state","sec-key-saved"))}),handleError)),t._gen.addEventListener("click",webui.eventSoloProcess((async _=>{t._input.setValue(generateSecurityKey())}),handleError))},disconnected:function(t){},shadowTemplate:'\n<style type="text/css">\n:host {\ndisplay:flex;\nmax-width:700px;\nmargin: 0 auto;\nflex-direction:column;\ngap: var(--padding);\n}\n</style>\n<webui-input-message theme="primary" label="Enter your security key here!" autofocus></webui-input-message>\n<webui-flex gap="var(--padding)" justify="flex-end">\n<webui-alert id="alert"></webui-alert>\n<webui-button theme="danger">Delete Key</webui-button>\n<webui-button theme="secondary">Generate Key</webui-button>\n<webui-button theme="primary">Save</webui-button>\n</webui-flex>\n'})}