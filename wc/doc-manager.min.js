"use strict";webui.define("app-doc-manager",{linkCss:!0,preload:"",constructor:t=>{t._fileSelector=t.template.querySelector('webui-dropdown[label="File"]'),t._content=t.template.querySelector("webui-content"),t._message=t.template.querySelector("webui-input-message"),t._btnReset=t.template.querySelector('webui-button[label="Reset"]'),t._btnSave=t.template.querySelector('webui-button[label="Save"]')},attr:[],flags:[],attrChanged:(t,property,value)=>{property},loadFiles:async function(){let t=this,counter=0;for(;void 0===webui.projectData.docs&&counter++<1e3;)await webui.wait(10);t._files=webui.projectData.docs||[];let options=[];t._files.forEach((fileName=>{let item={id:fileName,value:fileName,display:fileName};-1!==["readme.md","docs\\readme.md"].indexOf(fileName.toLowerCase())?options.unshift(item):options.push(item)})),t._fileSelector.setOptions(options),options.length>0&&t.loadFile(t._fileSelector.value)},loadFile:async function(file){let t=this;if(t._message.value="",!file)return;let fileContent=await webui.proxy.getProjectFile(file),counter=0;for(;!t._content.setHtml&&counter++<1e3;)await webui.wait(10);void 0!==fileContent?(t._content.setHtml(webui.parseMarkdown(fileContent)),t._message.value=fileContent):t._content.setHtml("Failed to load content")},connected:function(t){t._fileSelector.addEventListener("change",(ev=>{let file=t._fileSelector.value;t.loadFile(file)})),t._message.addEventListener("input",(ev=>{t._content.setHtml(webui.parseMarkdown(t._message.value))})),t._btnReset.addEventListener("click",(async ev=>{let file=t._fileSelector.value;file&&t.loadFile(file)})),t._btnSave.addEventListener("click",(async ev=>{let file=t._fileSelector.value;if(!file)return;let msg=await webui.proxy.saveProjectFile(file,t._message.value);msg&&webui.alert(msg,"success")})),t.loadFiles()},disconnected:function(t){},shadowTemplate:'\n<style type="text/css">\n:host {\ndisplay:flex;\nflex-direction:column;\ngap:var(--padding);\n}\nslot {\ndisplay:none;\n}\n</style>\n<webui-grid columns="1fr max-content max-content">\n<webui-dropdown label="File"></webui-dropdown>\n<webui-button theme="warning" label="Reset"></webui-button>\n<webui-button theme="success" label="Save"></webui-button>\n</webui-grid>\n<webui-grid columns="1fr 1fr">\n<webui-content></webui-content>\n<webui-input-message></webui-input-message>\n</webui.grid>\n'});